[{"path":"/articles/model_fitting.html","id":"fitting-a-vast-model-to-stream-network-data","dir":"Articles","previous_headings":"","what":"Fitting a VAST Model to Stream Network Data","title":"Fitting a VAST Model","text":"second chapter explaining use functions StreamVAST package. information prepare format data, please refer previous chapter Preparing Stream Network previous chapter, imported data steelhead salmon redds Mill Creek watershed, Washington State. two important data objects data frame dates locations redds, sf object LINESTRINGS defining different segments network. third object, set survey tracks also useful. Future versions package make use S3 classes streamline tracking objects.","code":"head(Mill.data) #>   X Year Day Reach   Effort Redds  STRM_NAME  root parent parent.distance #> 1 1 2013  64     1 2465.601     0 Mill Creek  TRUE     NA              NA #> 2 2 2013  64     2 3499.699     0 Mill Creek FALSE      1        3499.699 #> 3 3 2013  64     3 3354.350     0 Mill Creek FALSE      2        3427.024 #> 4 4 2013  64     4 3354.350     0 Mill Creek FALSE      3        3354.350 #> 5 5 2013  78     1 2465.601     0 Mill Creek  TRUE     NA              NA #> 6 6 2013  78     2 3499.699     0 Mill Creek FALSE      1        3499.699 print(Mill.reaches,n = 4) #> Simple feature collection with 22 features and 7 fields #> Geometry type: LINESTRING #> Dimension:     XY #> Bounding box:  xmin: 941970.7 ymin: 322499 xmax: 963147.4 ymax: 357159.5 #> Projected CRS: NAD83 / Washington South (ftUS) #> First 4 features: #>   from to reachid    STRM_NA root parent  prnt_ds #> 1    1  2       1 Mill Creek    1     NA       NA #> 2    2  3       2 Mill Creek    0      1 3499.699 #> 3    3  4       3 Mill Creek    0      2 3427.024 #> 4    4  5       4 Mill Creek    0      3 3354.350 #>                         geometry #> 1 LINESTRING (963147.4 322499... #> 2 LINESTRING (961311.9 324437... #> 3 LINESTRING (958655.6 326211... #> 4 LINESTRING (958123.2 328790..."},{"path":"/articles/model_fitting.html","id":"additional-formatting-for-vast","dir":"Articles","previous_headings":"Fitting a VAST Model to Stream Network Data","what":"Additional formatting for VAST","title":"Fitting a VAST Model","text":"minor formatting tasks need completed can fit model. need draw information Mill.reaches add “Area” column tracks total area reach, separate “Effort”. also take opportunity convert units feet km. date also converted variety formats (statistical week, Month) useful later. objects returned elements list. function also produces map spatial frame data coverage provided surveys can useful diagnostic check.  also need produce set auxiliary data frames VAST use determine spatial relationships, objects requires specific format specific columns names. returned elements 4-6 list. object “vast.input0” requires Lon Lat coordinates (midpoint reach), column named “child_i” equivalent reach id, column “Area_km2”, equivalent Area calculated (note treating stream lengths areas). need modify object later, choosing temporal resolution. “Vast.network” “vast.network.LL” nearly identical, except one Lon Lat columns. require columns “child_s” reach id, “parent_s” id parent, “dist_s” calling “parent.distance”. Note root, “parent_s” must set 0, “dist_s” must set Inf.","code":"Mill.list<-FormatStreamData(counts = Mill.data,reaches = Mill.reaches,surveys = Mill.surveys,unit.conv = .0003048) Redd.data<-Mill.list[[1]] Reach.data<-Mill.list[[2]] Survey.data<-Mill.list[[3]]  vast.input0<-Mill.list[[4]] vast.network<-Mill.list[[5]] vast.networkLL<-Mill.list[[6]]"},{"path":"/articles/model_fitting.html","id":"choosing-a-temporal-resolution","dir":"Articles","previous_headings":"Fitting a VAST Model to Stream Network Data","what":"Choosing a temporal resolution","title":"Fitting a VAST Model","text":"Depending system modeled, variety temporal resolutions possible. Therefore, need one additional formatting step, provided MakeVASTData. example, set temporal resolution one month, cover 5 months Feb. June. also pad ends data set zeros, mark ends season. function returns list two elements. first data frame contains everything need VAST.data frame three important additions. First, temporal element converted generic “Time” period runs sequence. also includes two columns “Original” “Dummy”. Original column identifies actual data points, Dummy column identifies time periods reaches data available, like model output prediction. second element list table useful relating time period back ’s normal calendar date. last step vast.input must number rows equal Redd.data.vast, pull vast.input0 make full version.","code":"Redd.data.vast.list<-MakeVASTData(data = Redd.data,reachdata = Reach.data,countname = \"Redds\",Time = \"Biweek\",                                   startdate = \"2013-02-01\",enddate = \"2022-06-30\",padzero = T) Redd.data.vast<-Redd.data.vast.list[[1]] time.table<-Redd.data.vast.list[[2]]  vast.input<-vast.input0[match(Redd.data.vast$Reach,vast.input0$child_i),]"},{"path":"/articles/model_fitting.html","id":"an-example-in-vast","dir":"Articles","previous_headings":"Fitting a VAST Model to Stream Network Data","what":"An example in VAST","title":"Fitting a VAST Model","text":"point, use VAST functions setup run model, example code used guide. user advised review documentation VAST, contains extensive options customize model. Future versions StreamVAST may include wrapper functions automatically choose sensible options, now users can use code document model. first step make settings object. important specify Region = “stream_network”, set n_x equal tot number reaches. zone UTM time zone, purpose = “index2” specifies goal abundance density prediction. FieldConfig turns various components model (example removes several terms simplicity stability), RhoConfig specifies type autocorrelation (random-walk case). modeling overdispersion, settings set zero. ObsModel controls distributions link functions model, current setting indicating Poisson count model zero inflation. Anisotropy fine_scale turned . Please see VAST documentation details. also necessary manually set method “Stream_network” calculate mean size prediction frame. example, use covariates, point set covariate data set well. See VAST documentation details. Next, can run model, using “fit_model” VAST package. many inputs, preceding steps made everything available. Note values converted units function. Also, VAST write number text files active working directory.","code":"settings <- make_settings(Region=\"stream_network\",                           zone=10,                           purpose = \"index2\",                           fine_scale=F,                           n_x = nrow(Reach.data),                           FieldConfig = c(\"Omega1\"= 1, \"Epsilon1\" = 1, \"Omega2\" = 0, \"Epsilon2\" = 0),                            RhoConfig = c(\"Beta1\" = 2, \"Epsilon1\" = 2, \"Beta2\" = 2, \"Epsilon2\" = 0),                           OverdispersionConfig = c(\"Eta1\" = 0, \"Eta2\" = 0),                           ObsModel = c(7, 0),                           bias.correct = T,                           use_anisotropy = F) settings$Method<-\"Stream_network\"             settings$grid_size_km<-mean(Reach.data$Length) vast.model<- fit_model(\"settings\" = settings,                        Lat_i = Redd.data.vast$Lat,                        Lon_i = Redd.data.vast$Lon,                        t_i = as.integer(Redd.data.vast$Time),                        b_i = as_units(Redd.data.vast$Redds,\"count\"),                        a_i = as_units(Redd.data.vast$Effort,\"km\"),                        test_fit = FALSE,                        PredTF_i=Redd.data.vast$dummy,                        input_grid=vast.input,                        Network_sz=vast.network,                        Network_sz_LL=vast.networkLL,                        newtonsteps = 3,                        Aniso=F,                        getsd=T,                        getHessian=T,                        max_cells=nrow(Redd.data.vast),                        Options = c('treat_nonencounter_as_zero' = F))"},{"path":"/articles/model_fitting.html","id":"preliminary-checks-and-troubleshooting","dir":"Articles","previous_headings":"Fitting a VAST Model to Stream Network Data","what":"Preliminary checks and Troubleshooting","title":"Fitting a VAST Model","text":"object “vast.model” contains many pieces, several useful determine algorithm run successfully. basic check parameter estimates often advisable. model converging, experiment making settings. often productive begin simple model (inputting 0s FieldConfig RhoConfig) gradually increase complexity. Refer VAST documentation specifics. predictions fitted VAST model can quickly extracted using helper function VASTpreds. function format predictions data frame, provide density count estimates reach time period. also provides upper lower 90% confidence bounds, based samples drawn posterior distribution. second functon can produce maps output.  maps can also faceted year, month, etc.  Vast also compatible DHARMa package, provides scaled residual estimates hierarchical models, good first step assessing model fit. Note due compatibility issues, must copy vast.model object named “fit”.  final chapter, StreamVAST provides functions allow users conveniently extract predictions residuals VAST model, explore model fit, generate derived population metrics, demonstrates plotting functions may useful evaluate present results model.","code":"vast.model$parameter_estimates$Convergence_check #> [1] \"There is no evidence that the model is not converged\" vast.model$parameter_estimates$par #>   L_omega1_z L_epsilon1_z    L_beta1_z    logkappa1 Beta_mean1_c    L_beta2_z  #>    3.5656370    0.4261484    0.6597098   -0.2753906   -1.2886024    1.2725911  #> Beta_mean2_c  #>   -3.2439917 vast.model$parameter_estimates$number_of_coefficients #>  Total  Fixed Random  #>   2669      7   2662 preds<-VASTpreds(model = vast.model,time.table=time.table) plotPredictionMap(data = preds,mapvar = \"density\",reaches = Reach.data,                   reach.names = \"reachid\",make.labels = F,xaxis.breaks = c(-123.24,-123.20)) plotPredictionMap(data = subset(preds,Year%in%c(2014,2016,2018,2020)),mapvar = \"density\",reaches = Reach.data,                   facet = \"Year\",reach.names = \"reachid\",make.labels = F,xaxis.breaks = 0,yaxis.breaks = 0) library(DHARMa) fit<-vast.model dharmaRes = summary(vast.model, what=\"residuals\", type=1)"},{"path":"/articles/shape_prep.html","id":"streamvast","dir":"Articles","previous_headings":"","what":"StreamVAST","title":"Preparing a Stream Network","text":"StreamVAST R package designed help users format data freshwater stream networks interface VAST package produce spatio-temporal models animal densities. package contains variety useful functions quickly processing complex stream networks usable form, attaching variety data network. makes extensive use sfnetworks package, users advised familiarize basics sfnetworks, particularly regarding activation extraction data. chapter covers steps necessary prepare stream shapes associated data. second chapter demonstrate data can used create spatio-temporal models using VAST.","code":""},{"path":"/articles/shape_prep.html","id":"example-steelhead-salmon-redds-in-mill-creek","dir":"Articles","previous_headings":"StreamVAST","what":"Example: Steelhead Salmon Redds in Mill Creek","title":"Preparing a Stream Network","text":"Mill Creek small watershed located east Longview, Washington home annual winter steelhead run February June. population assessed via counting number “redds” nests observed regular surveys spawning season. Redds recorded using GPS devices tracked successive surveys determine particular new observed previously.","code":""},{"path":"/articles/shape_prep.html","id":"converting-your-shape-into-a-network","dir":"Articles","previous_headings":"StreamVAST","what":"Converting your shape into a network","title":"Preparing a Stream Network","text":"shape generated using ARCGIS derived USGS surveys. However, formatted network. linestrings shapefile generally carry nodes intersections stream, confound distance path calculations. good first step convert sfnetwork. helper function package makes easy ensures transfer data fields. Note data fields may longer valid (.e. values long segment inherited new smaller segments), usually works well identifiers. stream network functionality VAST requires streams part continuous network single root loops multi-thread channels. results network every section (except root) single parent single distance parent. shape structured single root, simple function find return sf POINT object.  identifying root node crucial step, several functions exist may help: -FindRoots: returns nodes intersecting segment -LocateFeature: Allows user select node using command line graphics window -RootNetwork: Ensures segments ordered correctly (away root) removes unconnected features Last, remove multi-channel sections network. case, one. FixLoops function can help guiding user series command line prompts. vignette, jump past process. also sometimes convenient leave step later, next section “Simplifying network shape” may also fix problems.  final result identified sfnetworks “root tree spatially explicit edges” now satisfied assumptions necessary VAST.","code":"Mill.net<-Makesfnetwork(Mill.basin0) Mill.root<-LocateRoot(Mill.net) #> # A sfnetwork with 388 nodes and 387 edges #> # #> # CRS:  NAD83 / Washington South (ftUS)  #> # #> # A rooted tree with spatially explicit edges #> # #> # Node Data:     388 × 1 (active) #> # Geometry type: POINT #> # Dimension:     XY #> # Bounding box:  xmin: 927926.1 ymin: 315473.9 xmax: 963621.4 ymax: 366441.2 #> # … with 388 more rows, and 1 variable: geometry <GEOMETRY [US_survey_foot]> #> # #> # Edge Data:     387 × 20 #> # Geometry type: LINESTRING #> # Dimension:     XY #> # Bounding box:  xmin: 927926.1 ymin: 315473.9 xmax: 963621.4 ymax: 366441.2 #>    from    to LLID  LLIDSRC LENGTH STRM_N… FEATURE SCALED REV_DA… Correc… #>   <int> <int> <chr> <chr>    <dbl> <chr>   <chr>    <dbl> <chr>     <dbl> #> 1     1     2 1232… 24K      2222. NA      WC           0 06-12-…       0 #> 2     3     4 1232… 24K      2017. NA      WC           0 06-12-…       0 #> 3     5     6 1232… 24K      1440. NA      WC           0 06-12-…       0 #> # … with 384 more rows, and 10 more variables: RMflagMich <dbl>, #> #   RMFlag_FD <dbl>, TopHatch <dbl>, BanksMeas <dbl>, BanksMouth <dbl>, #> #   CrctMethod <chr>, LengthFlag <dbl>, Shape_Leng <dbl>, geometry <LINESTRING #> #   [US_survey_foot]>, loop <lgl>"},{"path":"/articles/shape_prep.html","id":"simplifing-a-network-or-shape","dir":"Articles","previous_headings":"StreamVAST","what":"Simplifing a network or shape","title":"Preparing a Stream Network","text":"basin contains many branches small steelhead spawn inhabit, common first step simplify shape. number options, use redd data extract parts network redds observed. options include using line work, identifiers network object match exclude sections.  figure shows original network black, locations redd observations blue, new stream network red. new network reflects areas necessary connect observations root. process often leaves unnecessary nodes place, general best remove stage, unless wish nodes preserved future steps. now clean set shapes stream network","code":"Mill.basin2<-PruneNetwork(network = Mill.basin, root = Mill.root,match = Mill.redds.sf,plot=F) Mill.basin3<-SimplifyNetwork(network = Mill.basin2,makeplot = F)"},{"path":"/articles/shape_prep.html","id":"defining-spatial-frame","dir":"Articles","previous_headings":"StreamVAST","what":"Defining spatial frame","title":"Preparing a Stream Network","text":"next step define spatial resolution stream network. dataset, observation discreet gps coordinates, must aggregated defined reaches VAST model. Future options allow users define spatial resolution complex ways, now assign prediction frames selecting target size. use target 1 km 3280 feet, though algorithm adjust value make evenly sized spaced stream reaches, respecting nodes network. process pruning assigning reaches typically removes data attached network, can reattach using simple function. case, attach one field. new reaches unlikely match old ones, numeric values reach based weighted average areas reach overlaps, whereas character factor values concatenated make new value. also run quick function check network valid structure also compute useful values, marking reachid parent, distance segments (measured midpoints)","code":"Mill.reaches<-AssignReaches(network = Mill.basin3,targetsize = 3280) #> [1] \"Using reach size of 3345.6\" Mill.reaches2<-AttachData(shape = st_as_sf(activate(Mill.reaches,\"edges\")),refshape = Mill.basin0,fields = \"STRM_NAME\") Mill.reaches3<-CheckNetwork(network=as_sfnetwork(Mill.reaches2),root=Mill.root)"},{"path":"/articles/shape_prep.html","id":"assemble-the-data","dir":"Articles","previous_headings":"StreamVAST","what":"Assemble the Data","title":"Preparing a Stream Network","text":"Now fully processed valid network, assigned reaches, time assemble data frame. example, data collected surveys cover segment stream can defined start end point. points used determine reaches observed date, extent reach observed recorded “effort”, become offset VAST model. Counts can computed survey level, distinct observations (redds). Surveys formatted sf object LINESTRING survey transect, LINESTRING reasonably close linework used network. package includes two functions can help construct necessary survey object: -MakeSurveyTracks: Uses start stop coordinates trace path along network -RiverMeasureLL: Converts river measures Lat/Lon, vice versa numerous surveys, function can time consuming Future versions expanded capabilities also handle data collected discreet points, dams weirs. final step combine spatial reaches, surveys, data. last function use survey tracks determine amount effort applied reach given date, become offset VAST model. Separately, also match observations survey, allows observed counts density reach date calculated used model. example, observation coordinates, total count survey can also used (case, function assumes observations evenly spaced, equivalent constant density surveyed area. Note large datasets, step may take several hours. next chapter, explore additional options formatting data use VAST, ensure necessary accessory objects dataframes ready VAST package functions.","code":"Mill.data<-AssembleReddData(shape = Mill.reaches3,georedds = Mill.redds,georedds.coords = c(\"lon\",\"lat\"),reddcrs = 2286,surveys = Mill.surveys) head(Mill.data) #>   Year Day Reach                    Effort Redds habitat  STRM_NAME  root #> 1 2013  64     1 2465.601 [US_survey_foot]     0    TRUE Mill Creek  TRUE #> 2 2013  64     2 3499.699 [US_survey_foot]     0    TRUE Mill Creek FALSE #> 3 2013  64     3 3354.350 [US_survey_foot]     0    TRUE Mill Creek FALSE #> 4 2013  64     4 3354.350 [US_survey_foot]     0    TRUE Mill Creek FALSE #> 5 2013  78     1 2465.601 [US_survey_foot]     0    TRUE Mill Creek  TRUE #> 6 2013  78     2 3499.699 [US_survey_foot]     0    TRUE Mill Creek FALSE #>   parent parent.distance #> 1     NA              NA #> 2      1        3499.699 #> 3      2        3427.024 #> 4      3        3354.350 #> 5     NA              NA #> 6      1        3499.699"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jeremy Harris. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Harris J (2023). StreamVAST: Tools using 'VAST' stream networks. R package version 0.0.0.9000, https://jpharris7.github.io/StreamVAST/.","code":"@Manual{,   title = {StreamVAST: Tools for using 'VAST' with stream networks},   author = {Jeremy Harris},   year = {2023},   note = {R package version 0.0.0.9000},   url = {https://jpharris7.github.io/StreamVAST/}, }"},{"path":"/index.html","id":"streamvast","dir":"","previous_headings":"","what":"Tools for using VAST with stream networks","title":"Tools for using VAST with stream networks","text":"R package modeling stream networks VAST","code":""},{"path":"/index.html","id":"description","dir":"","previous_headings":"","what":"Description","title":"Tools for using VAST with stream networks","text":"StreamVAST package aids users designing spatio-temporal models data collected stream networks. designed integrate easily VAST package, users need familiar VAST understand make full use features. working knowledge sfnetworks package also recommended. StreamVAST contains variety functions guide users converting linework sources valid network appropriate characteristics. User options selecting root node, pruning unnecessary branches, dividing network prediction frames, associating various data types network features. features assist generating objects needed VAST stream network functionality, assessing model fit, easily making various maps plots. package still early phases development, users expect frequent updates changes. ## Installation strongly recommended users first install VAST package dependencies. doesn’t work, consider leaving vignettes, development.","code":"remotes::install_github(\"Jpharris7/StreamVAST\") remotes::install_github(\"Jpharris7/StreamVAST\", build_vignettes = FALSE)"},{"path":"/index.html","id":"shape-and-data-prep","dir":"","previous_headings":"","what":"Shape and Data Prep","title":"Tools for using VAST with stream networks","text":"section demonstrates format clean set lines, convert network, root network, remove unnecessary sections, associate various types data network. Preparing Stream Network","code":""},{"path":"/index.html","id":"formating-and-running-vast","dir":"","previous_headings":"","what":"Formating and Running VAST","title":"Tools for using VAST with stream networks","text":"tutorial section construction.","code":""},{"path":"/index.html","id":"plots-and-outputs","dir":"","previous_headings":"","what":"Plots and outputs","title":"Tools for using VAST with stream networks","text":"tutorial section construction.","code":""},{"path":"/reference/AddFeatures.html","id":null,"dir":"Reference","previous_headings":"","what":"Add nodes or edges to a sfnetwork — AddFeatures","title":"Add nodes or edges to a sfnetwork — AddFeatures","text":"function adds additional nodes edge segments network. adding anything, checks new features distinct pre-existing features, relatively close existing network. Note, function tested extensively.","code":""},{"path":"/reference/AddFeatures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add nodes or edges to a sfnetwork — AddFeatures","text":"","code":"AddFeatures(network, nodes, edges, crs, tolerance = 200, tolerance2 = 10)"},{"path":"/reference/AddFeatures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add nodes or edges to a sfnetwork — AddFeatures","text":"network sfnetwork object nodes data frame lon lat columns, sf object POINT geometry edges sf object LINESTRING geometry includes edges added crs crs object, nodes edges different crs network tolerance maximum distance snapping shape network, shapes outside tolerance removed tolerance2 maximum distance snapping nodes together, new nodes within tolerance distinct existing nodes","code":""},{"path":"/reference/AddFeatures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add nodes or edges to a sfnetwork — AddFeatures","text":"sfnetwork indicated nodes added","code":""},{"path":"/reference/AssembleReddData.html","id":null,"dir":"Reference","previous_headings":"","what":"Combines survey tracks, counts, and a network into a data frame — AssembleReddData","title":"Combines survey tracks, counts, and a network into a data frame — AssembleReddData","text":"function takes sfnetwork sf shape, set surveys, optionally set georeferenced redds observations, returns data set effort assigned reach count types associated observation date.","code":""},{"path":"/reference/AssembleReddData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combines survey tracks, counts, and a network into a data frame — AssembleReddData","text":"","code":"AssembleReddData(   shape,   georedds = NA,   georedds.type = NA,   georedds.coords = NA,   reddcrs = \"wgs84\",   tolerance.redds = 250,   tolerance.surveys = 10,   surveys,   survey.redds = NA )"},{"path":"/reference/AssembleReddData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combines survey tracks, counts, and a network into a data frame — AssembleReddData","text":"shape sf object LINESTRING geometries, sfnetwork georedds optional dataframe coordinates redd observation georedds.type optional name column classification redds georedds.coords character vector column names lon/lat georedds reddcrs crs coordinates georedds tolerance.redds maximum distance snapping redds shape tolerance.surveys maximum distance snapping surveys shape (small) surveys sf object LINESTRINGs representing surveys survey.redds optional name column survey counts","code":""},{"path":"/reference/AssembleReddData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combines survey tracks, counts, and a network into a data frame — AssembleReddData","text":"dataframe dates, counts, effort surveyed location","code":""},{"path":"/reference/AssignReaches.html","id":null,"dir":"Reference","previous_headings":"","what":"Divide a network into reaches — AssignReaches","title":"Divide a network into reaches — AssignReaches","text":"function takes network divides distinct reaches based target size want set boundaries, use setnodes set targetsize high setnodes argument can used ensure certain reach boundaries (implemented yet)","code":""},{"path":"/reference/AssignReaches.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Divide a network into reaches — AssignReaches","text":"","code":"AssignReaches(network, targetsize = 100, habitat)"},{"path":"/reference/AssignReaches.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Divide a network into reaches — AssignReaches","text":"network sfnetwork targetsize desired size use reaches habitat logical vector identifies areas habitat (T) vs non-habitat (F)","code":""},{"path":"/reference/AssignReaches.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Divide a network into reaches — AssignReaches","text":"new sfnetwork object divided reaches approximately correct size","code":""},{"path":"/reference/AttachData.html","id":null,"dir":"Reference","previous_headings":"","what":"Attach Data to a network — AttachData","title":"Attach Data to a network — AttachData","text":"Take data contained one sf LINESTRING object attaches network. Values averaged combined appropriate. Take care ID numbers coded data may appear numeric, meant combined averaged.","code":""},{"path":"/reference/AttachData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Attach Data to a network — AttachData","text":"","code":"AttachData(shape, refshape, fields = \"all\", logical = F, tolerance = 100)"},{"path":"/reference/AttachData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Attach Data to a network — AttachData","text":"shape sfnetwork sf object LINESTRING geometry attach data refshape sf object LINESTRING geometry contains desired data fields character vector names columns attach, \"\" logical T/F determining handle logical values tolerance number used matching lines perfectly aligned","code":""},{"path":"/reference/AttachData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Attach Data to a network — AttachData","text":"sfnetwork consisting original shape data attached now","code":""},{"path":"/reference/CheckNetwork.html","id":null,"dir":"Reference","previous_headings":"","what":"Check a network and correct common problems — CheckNetwork","title":"Check a network and correct common problems — CheckNetwork","text":"function checks direction stream network away root fixes problems, also adds column named \"parent\" shape distance midpoint parent midpoint child","code":""},{"path":"/reference/CheckNetwork.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check a network and correct common problems — CheckNetwork","text":"","code":"CheckNetwork(network, root)"},{"path":"/reference/CheckNetwork.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check a network and correct common problems — CheckNetwork","text":"network sfnetwork object root sf POINT vector coordinates root","code":""},{"path":"/reference/CheckNetwork.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check a network and correct common problems — CheckNetwork","text":"sfnetwork additional data attached","code":""},{"path":"/reference/EditFeatures.html","id":null,"dir":"Reference","previous_headings":"","what":"Edit a shape or network in real time — EditFeatures","title":"Edit a shape or network in real time — EditFeatures","text":"Allows user add points remove features selecting plot window command line prompts","code":""},{"path":"/reference/EditFeatures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Edit a shape or network in real time — EditFeatures","text":"","code":"EditFeatures(shape, root)"},{"path":"/reference/EditFeatures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Edit a shape or network in real time — EditFeatures","text":"shape sf sfnetworks object editted root sf POINT root (might obsolete)","code":""},{"path":"/reference/ExtractBasin.html","id":null,"dir":"Reference","previous_headings":"","what":"Extracts a basin or subbasin — ExtractBasin","title":"Extracts a basin or subbasin — ExtractBasin","text":"function takes shape extracts network node Note function preserve information associated original shapefile Future versions allow user specify information preserve, allow ","code":""},{"path":"/reference/ExtractBasin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extracts a basin or subbasin — ExtractBasin","text":"","code":"ExtractBasin(shape, root, basin, exclude)"},{"path":"/reference/ExtractBasin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extracts a basin or subbasin — ExtractBasin","text":"shape sf object consisting linestrings (multilinestrings!) root sf point, length 2 vector xy coordinates basin name sf feature indicating basin extracted exclude vector indexes dropped, attempt match single name","code":""},{"path":"/reference/ExtractBasin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extracts a basin or subbasin — ExtractBasin","text":"sfnetwork containing specified subbasin","code":""},{"path":"/reference/FindRoots.html","id":null,"dir":"Reference","previous_headings":"","what":"FindRoots — FindRoots","title":"FindRoots — FindRoots","text":"function locates vertices connected shape specified mainstem","code":""},{"path":"/reference/FindRoots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FindRoots — FindRoots","text":"","code":"FindRoots(shape, mainstem = NA)"},{"path":"/reference/FindRoots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"FindRoots — FindRoots","text":"shape sf object linestring geometry Identifier data mainstem name unique id mainstem basins branch ","code":""},{"path":"/reference/FindRoots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"FindRoots — FindRoots","text":"sf object points potential root","code":""},{"path":"/reference/FixLoops.html","id":null,"dir":"Reference","previous_headings":"","what":"Guides the user in how to fix loops — FixLoops","title":"Guides the user in how to fix loops — FixLoops","text":"function guide user eliminating loops network using command line. Note vast, rooted tree required, reach can multiple parents","code":""},{"path":"/reference/FixLoops.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guides the user in how to fix loops — FixLoops","text":"","code":"FixLoops(network, root, guides = NULL)"},{"path":"/reference/FixLoops.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Guides the user in how to fix loops — FixLoops","text":"network sfnetwork root sf object coordinates root guides optional list sf objects may assist decision making","code":""},{"path":"/reference/FixLoops.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Guides the user in how to fix loops — FixLoops","text":"sfnetwork user specified sections removed","code":""},{"path":"/reference/FormatStreamData.html","id":null,"dir":"Reference","previous_headings":"","what":"Final formatting of Stream data for VAST — FormatStreamData","title":"Final formatting of Stream data for VAST — FormatStreamData","text":"Provides final formatting convenience steps using VAST","code":""},{"path":"/reference/FormatStreamData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Final formatting of Stream data for VAST — FormatStreamData","text":"","code":"FormatStreamData(counts, reaches, surveys, unit.conv = 0.0003048)"},{"path":"/reference/FormatStreamData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Final formatting of Stream data for VAST — FormatStreamData","text":"counts data frame count data, presumably AssembleReddData, filename reaches sf lines object, presumably StreamVAST functions, filename surveys optional set surveys, presumably MakeSurveyTracks, filename unit.conv conversion used distance units, can set 1","code":""},{"path":"/reference/FormatStreamData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Final formatting of Stream data for VAST — FormatStreamData","text":"list several elements necessary VAST","code":""},{"path":"/reference/LocateFeature.html","id":null,"dir":"Reference","previous_headings":"","what":"Locate a feature on a shape or network — LocateFeature","title":"Locate a feature on a shape or network — LocateFeature","text":"Allows user select number shapes sf object network clicking plot window. shape converted sfnetwork first","code":""},{"path":"/reference/LocateFeature.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Locate a feature on a shape or network — LocateFeature","text":"","code":"LocateFeature(shape, type)"},{"path":"/reference/LocateFeature.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Locate a feature on a shape or network — LocateFeature","text":"shape sf object LINESTRING geometry sfnetwork type Either \"POINT\", \"VERTEX\" \"SEGMENT\" indicates type shape select","code":""},{"path":"/reference/LocateFeature.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Locate a feature on a shape or network — LocateFeature","text":"sf object containing POINTS LINESTRINGS selected user","code":""},{"path":"/reference/LocateRoot.html","id":null,"dir":"Reference","previous_headings":"","what":"Locate the root of a network — LocateRoot","title":"Locate the root of a network — LocateRoot","text":"Locates root network, assuming one. network unconnected nodes valid root, returns error","code":""},{"path":"/reference/LocateRoot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Locate the root of a network — LocateRoot","text":"","code":"LocateRoot(network)"},{"path":"/reference/LocateRoot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Locate the root of a network — LocateRoot","text":"network sf network object valid root","code":""},{"path":"/reference/LocateRoot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Locate the root of a network — LocateRoot","text":"sf object POINT geometry representing root network","code":""},{"path":"/reference/Makesfnetwork.html","id":null,"dir":"Reference","previous_headings":"","what":"Make a sf network — Makesfnetwork","title":"Make a sf network — Makesfnetwork","text":"function converts sf shape linestring multilinestring geometries sfnetwork object. Mostly, used internally.","code":""},{"path":"/reference/Makesfnetwork.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a sf network — Makesfnetwork","text":"","code":"Makesfnetwork(shape, attach.data = T)"},{"path":"/reference/Makesfnetwork.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a sf network — Makesfnetwork","text":"shape sf object LINESTRING MULTILINESTRING geometry attach.data Logical, whether data fields preserved","code":""},{"path":"/reference/Makesfnetwork.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make a sf network — Makesfnetwork","text":"sfnetwork object","code":""},{"path":"/reference/MakeSurveyTracks.html","id":null,"dir":"Reference","previous_headings":"","what":"Makes sf LINESTRINGs representing survey transects — MakeSurveyTracks","title":"Makes sf LINESTRINGs representing survey transects — MakeSurveyTracks","text":"function uses coordinates locate start stop points survey draws line follows stream contours points. multiple paths available, choose shortest, best eliminate multichannel sections ahead time","code":""},{"path":"/reference/MakeSurveyTracks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Makes sf LINESTRINGs representing survey transects — MakeSurveyTracks","text":"","code":"MakeSurveyTracks(   shape,   surveys,   surveys.crs = \"wgs84\",   save.col = \"all\",   maxdist = 25,   survey.coords = c(\"startlon\", \"startlat\", \"endlon\", \"endlat\") )"},{"path":"/reference/MakeSurveyTracks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Makes sf LINESTRINGs representing survey transects — MakeSurveyTracks","text":"shape sf network sf object LINESTRING geometry surveys data frame coordinates desired information surveys.crs crs object code survey coordinates save.col character vector names columns save, \"\" maxdist maximum distance coordinates compared shape survey.coords vector names column numbers; order matters","code":""},{"path":"/reference/MakeSurveyTracks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Makes sf LINESTRINGs representing survey transects — MakeSurveyTracks","text":"sf object LINESTRINGS data representing survey","code":""},{"path":"/reference/MakeVASTData.html","id":null,"dir":"Reference","previous_headings":"","what":"This function takes data from the Load Stream data function and formats it for use with VAST — MakeVASTData","title":"This function takes data from the Load Stream data function and formats it for use with VAST — MakeVASTData","text":"function takes data Load Stream data function formats use VAST","code":""},{"path":"/reference/MakeVASTData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function takes data from the Load Stream data function and formats it for use with VAST — MakeVASTData","text":"","code":"MakeVASTData(   data,   reachdata,   unit.conv = 1,   reddname = \"Redds\",   startdate = NA,   enddate = NA,   padzero = T,   Time = \"Year\" )"},{"path":"/reference/MakeVASTData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function takes data from the Load Stream data function and formats it for use with VAST — MakeVASTData","text":"data data frame time, space, effort, observations reachdata sf object, presumably LoadStreamData unit.conv unit conversion distances reddname name data corresponds Redd count startdate dates truncate expand data yyyy-mm-dd format enddate dates truncate expand data yyyy-mm-dd format padzero survey zero observations added start/end dates Time character giving timescale use","code":""},{"path":"/reference/plotPredictionMap.html","id":null,"dir":"Reference","previous_headings":"","what":"Maps, the desired data, with options for facetting — plotPredictionMap","title":"Maps, the desired data, with options for facetting — plotPredictionMap","text":"Maps, desired data, options facetting","code":""},{"path":"/reference/plotPredictionMap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Maps, the desired data, with options for facetting — plotPredictionMap","text":"","code":"plotPredictionMap(   data,   mapvar = \"preds\",   reaches,   facet = NA,   reach.names = \"reachid\",   make.labels = T,   xaxis.breaks = NA,   yaxis.breaks = NA,   palette = \"turbo\" )"},{"path":"/reference/plotPredictionMap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Maps, the desired data, with options for facetting — plotPredictionMap","text":"data data frame predictions grouping data mapvar column data map reaches sf object reach data facet column determine facets, vector values reach.names column reaches holds id numbers make.labels reaches labelled, turn multiple years xaxis.breaks Vector x values axis lines; useful reduce crowding yaxis.breaks Vector y values axis lines; useful reduce crowding palette viridis color palette plotting","code":""},{"path":"/reference/plotPredictionMap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Maps, the desired data, with options for facetting — plotPredictionMap","text":"colored heatmap desired variable mapped stream network","code":""},{"path":"/reference/plotStream.html","id":null,"dir":"Reference","previous_headings":"","what":"Makes a line plot that shows tributaries by stream distance — plotStream","title":"Makes a line plot that shows tributaries by stream distance — plotStream","text":"Makes line plot shows tributaries stream distance","code":""},{"path":"/reference/plotStream.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Makes a line plot that shows tributaries by stream distance — plotStream","text":"","code":"plotStream(   data,   plotvar,   streamdist = \"streamdist\",   rnames = \"STRM_NA\",   reaches,   main = NA )"},{"path":"/reference/plotStream.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Makes a line plot that shows tributaries by stream distance — plotStream","text":"data data frame variable plot matched reach plotvar column name data plotted streamdist name column reaches stream distance rnames name id reaches reaches sf object containing reach data main name mainstem important stream, highlighted","code":""},{"path":"/reference/plotStream.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Makes a line plot that shows tributaries by stream distance — plotStream","text":"plot variable respect ot stream distance","code":""},{"path":"/reference/PointSetup.html","id":null,"dir":"Reference","previous_headings":"","what":"Point Setup and checking — PointSetup","title":"Point Setup and checking — PointSetup","text":"Checks point sf object appropriate crs, converts inputs sf object POINT geometry; mostly used internally check user inputs","code":""},{"path":"/reference/PointSetup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Point Setup and checking — PointSetup","text":"","code":"PointSetup(point, crs)"},{"path":"/reference/PointSetup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Point Setup and checking — PointSetup","text":"point sf, sfc, dataframe, vector containing geometry coordinates representing point crs crs apply point, sf sfc object","code":""},{"path":"/reference/PointSetup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Point Setup and checking — PointSetup","text":"sf object POINT geometry","code":""},{"path":"/reference/PruneNetwork.html","id":null,"dir":"Reference","previous_headings":"","what":"Prunes a network based on various criteria — PruneNetwork","title":"Prunes a network based on various criteria — PruneNetwork","text":"New improved version prune network, handles larger variety inputs better implemented exclude match can used variety ways, function can sometimes handle time often better call function multiple times, using different arguments","code":""},{"path":"/reference/PruneNetwork.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prunes a network based on various criteria — PruneNetwork","text":"","code":"PruneNetwork(network, root, exclude, match, tolerance = 100, plot = T)"},{"path":"/reference/PruneNetwork.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prunes a network based on various criteria — PruneNetwork","text":"network sfnetwork pruned root sf point coordinates root exclude logical vector vector values exclude match sf object points lines tolerance tolerance matching points network plot logical, plot made","code":""},{"path":"/reference/PruneNetwork.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prunes a network based on various criteria — PruneNetwork","text":"sfnetwork pruned specified","code":""},{"path":"/reference/RiverMeasureLL.html","id":null,"dir":"Reference","previous_headings":"","what":"Converts river measures and Lon/Lat coordinates — RiverMeasureLL","title":"Converts river measures and Lon/Lat coordinates — RiverMeasureLL","text":"tool take LINESTRING either returns coordinates based set river measures river measures based set given coordinates. Note single, unbranched LINESTRING used shape, may require calling function multiple times complex systems shape constructed right direction well (happen automatically using functions).","code":""},{"path":"/reference/RiverMeasureLL.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Converts river measures and Lon/Lat coordinates — RiverMeasureLL","text":"","code":"RiverMeasureLL(shape, measures, points, crs)"},{"path":"/reference/RiverMeasureLL.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Converts river measures and Lon/Lat coordinates — RiverMeasureLL","text":"shape sf LINESTRING corresponding stream measures vector river measures, units shape points dataframe coordinates sf object POINT geometries crs crs points","code":""},{"path":"/reference/RiverMeasureLL.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Converts river measures and Lon/Lat coordinates — RiverMeasureLL","text":"sf object POINT geometries matched coordinates river measure data","code":""},{"path":"/reference/RootNetwork.html","id":null,"dir":"Reference","previous_headings":"","what":"Adds or changes the root of a network — RootNetwork","title":"Adds or changes the root of a network — RootNetwork","text":"function sets root ensures nodes connected , preserves old data. nodes connected root removed. default, function root network closest existing node specified root. Set tolerance = 0 instead cause function create new node","code":""},{"path":"/reference/RootNetwork.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adds or changes the root of a network — RootNetwork","text":"","code":"RootNetwork(network, root, tolerance = Inf)"},{"path":"/reference/RootNetwork.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adds or changes the root of a network — RootNetwork","text":"network sfnetwork root sf point, coordinates new root tolerance distance determines whether use existing nodes blend new one","code":""},{"path":"/reference/RootNetwork.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adds or changes the root of a network — RootNetwork","text":"sfnetwork new root","code":""},{"path":"/reference/SimplifyNetwork.html","id":null,"dir":"Reference","previous_headings":"","what":"Simplifies a sfnetwork — SimplifyNetwork","title":"Simplifies a sfnetwork — SimplifyNetwork","text":"function removes extraneous nodes small segments network often leftover operations","code":""},{"path":"/reference/SimplifyNetwork.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simplifies a sfnetwork — SimplifyNetwork","text":"","code":"SimplifyNetwork(network, tolerance = 1000, tolerance2 = 1, makeplot = T)"},{"path":"/reference/SimplifyNetwork.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simplifies a sfnetwork — SimplifyNetwork","text":"network sfnetwork tolerance integer, segments connections size removed tolerance2 fine scale tolerance resolving overlapping edges; small makeplot funciton output plot showing /versions network","code":""},{"path":"/reference/SimplifyNetwork.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simplifies a sfnetwork — SimplifyNetwork","text":"sfnetwork object","code":""},{"path":"/reference/VASTeval.html","id":null,"dir":"Reference","previous_headings":"","what":"Get predictions matched to observations from a vast model — VASTeval","title":"Get predictions matched to observations from a vast model — VASTeval","text":"Get predictions matched observations vast model","code":""},{"path":"/reference/VASTeval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get predictions matched to observations from a vast model — VASTeval","text":"","code":"VASTeval(model, data, effort = \"Effort\", time.table = NA)"},{"path":"/reference/VASTeval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get predictions matched to observations from a vast model — VASTeval","text":"model VAST model object data model data used fit VAST model effort name column effort information time.table optional table matching time date, used provide year, month, day","code":""},{"path":"/reference/VASTeval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get predictions matched to observations from a vast model — VASTeval","text":"data frame observed densities counts matched predictions","code":""},{"path":"/reference/VASTpreds.html","id":null,"dir":"Reference","previous_headings":"","what":"Get density predictions from a VAST model — VASTpreds","title":"Get density predictions from a VAST model — VASTpreds","text":"function quickly constructs data frame VAST density predictions matched time space. also samples provides upper lower bounds (90%)","code":""},{"path":"/reference/VASTpreds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get density predictions from a VAST model — VASTpreds","text":"","code":"VASTpreds(model, time = \"Time\", space = \"Reach\", time.table = NA, sim.data)"},{"path":"/reference/VASTpreds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get density predictions from a VAST model — VASTpreds","text":"model VAST model object time name time variable output data frame space name space variable output data frame time.table optional table matching time date, used provide year, month, day sim.data already simulated data, save time supplying ","code":""},{"path":"/reference/VASTpreds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get density predictions from a VAST model — VASTpreds","text":"data frame density predictions uncertainty match space time","code":""},{"path":"/reference/VASTtotals.html","id":null,"dir":"Reference","previous_headings":"","what":"Assemble estimates of total population index by time — VASTtotals","title":"Assemble estimates of total population index by time — VASTtotals","text":"Assemble estimates total population index time","code":""},{"path":"/reference/VASTtotals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assemble estimates of total population index by time — VASTtotals","text":"","code":"VASTtotals(model, eval)"},{"path":"/reference/VASTtotals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assemble estimates of total population index by time — VASTtotals","text":"model fitted VAST model eval dataframe produced VASTeval","code":""},{"path":"/reference/VASTtotals.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assemble estimates of total population index by time — VASTtotals","text":"data frame population index CIs","code":""}]
